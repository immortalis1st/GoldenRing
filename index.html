<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–æ–ª–æ—Ç–æ–µ –∫–æ–ª—å—Ü–æ –†–æ—Å—Å–∏–∏ - –ü–æ–ª–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            padding: 20px;
            background-color: #f0f8ff;
            max-width: 800px;
            margin: 0 auto;
        }

        .day-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 40px;
        }

        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }

        .location {
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            position: relative;
        }

        .route-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            transition: background 0.3s;
            font-size: 14px;
        }

        .route-btn:hover {
            background: #2980b9;
        }

        .address {
            color: #7f8c8d;
            font-size: 0.9em;
            margin: 5px 0;
        }

        #loader {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            background: #3498db;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <h1>üöó –ú–∞—Ä—à—Ä—É—Ç –ø–æ –ó–æ–ª–æ—Ç–æ–º—É –∫–æ–ª—å—Ü—É –†–æ—Å—Å–∏–∏</h1>
    <div id="route-container"></div>
    <div id="loader">–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞...</div>

    <script>
        const routeData = [
            {
                day: 1,
                city: "–Ø—Ä–æ—Å–ª–∞–≤–ª—å",
                locations: [
                    { name: "–°–ø–∞—Å–æ-–ü—Ä–µ–æ–±—Ä–∞–∂–µ–Ω—Å–∫–∏–π –º–æ–Ω–∞—Å—Ç—ã—Ä—å", address: "–ë–æ–≥–æ—è–≤–ª–µ–Ω—Å–∫–∞—è –ø–ª., 25" },
                    { name: "–í–æ–ª–∂—Å–∫–∞—è –Ω–∞–±–µ—Ä–µ–∂–Ω–∞—è –∏ –°—Ç—Ä–µ–ª–∫–∞", address: "–í–æ–ª–∂—Å–∫–∞—è –Ω–∞–±–µ—Ä–µ–∂–Ω–∞—è" },
                    { name: "–ü–∞—Ä–∫ ¬´–¢—ã—Å—è—á–µ–ª–µ—Ç–∏—è –Ø—Ä–æ—Å–ª–∞–≤–ª—è¬ª", address: "—É–ª. –ü–æ–¥–∑–µ–ª–µ–Ω—å–µ" },
                    { name: "–ú—É–∑–µ–π ¬´–ú—É–∑—ã–∫–∞ –∏ –≤—Ä–µ–º—è¬ª", address: "–í–æ–ª–∂—Å–∫–∞—è –Ω–∞–±–µ—Ä–µ–∂–Ω–∞—è, 33–ê" },
                    { name: "–ö–∞—Ñ–µ ¬´–ò–æ–∞–Ω–Ω –í–∞—Å–∏–ª—å–µ–≤–∏—á¬ª", address: "–†–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä., 4" }
                ]
            },
            {
                day: 2,
                city: "–ö–æ—Å—Ç—Ä–æ–º–∞",
                locations: [
                    { name: "–ò–ø–∞—Ç—å–µ–≤—Å–∫–∏–π –º–æ–Ω–∞—Å—Ç—ã—Ä—å", address: "—É–ª. –ü—Ä–æ—Å–≤–µ—â–µ–Ω–∏—è, 1" },
                    { name: "–õ–æ—Å–∏–Ω–∞—è —Ñ–µ—Ä–º–∞ ¬´–°—É–º–∞—Ä–æ–∫–æ–≤–æ¬ª", address: "–¥. –°—É–º–∞—Ä–æ–∫–æ–≤–æ" },
                    { name: "–¢–æ—Ä–≥–æ–≤—ã–µ —Ä—è–¥—ã", address: "—É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, 2" },
                    { name: "–ë–µ—Å–µ–¥–∫–∞ –û—Å—Ç—Ä–æ–≤—Å–∫–æ–≥–æ", address: "–Ω–∞–±–µ—Ä–µ–∂–Ω–∞—è —Ä. –í–æ–ª–≥–∏" },
                    { name: "–†–µ—Å—Ç–æ—Ä–∞–Ω ¬´–°–Ω–µ–≥—É—Ä–æ—á–∫–∞¬ª", address: "—É–ª. –õ–∞–≥–µ—Ä–Ω–∞—è, 38" }
                ]
            },
            {
                day: 3,
                city: "–ò–≤–∞–Ω–æ–≤–æ",
                locations: [
                    { name: "–ú—É–∑–µ–π –∏–≤–∞–Ω–æ–≤—Å–∫–æ–≥–æ —Å–∏—Ç—Ü–∞", address: "—É–ª. –ë–∞—Ç—É—Ä–∏–Ω–∞, 11/42" },
                    { name: "–ü–∞—Ä–∫ –∏–º. –°—Ç–µ–ø–∞–Ω–æ–≤–∞", address: "—É–ª. –°–º–æ–ª—å–Ω–∞—è" },
                    { name: "–ê—Ä—Ç-—Å–∫–≤–µ—Ä ¬´–ì–∞–ª–µ—Ä–µ—è –ì—Ä–∞—Ñ—Ñ–∏—Ç–∏¬ª", address: "—É–ª. 10 –ê–≤–≥—É—Å—Ç–∞" },
                    { name: "–©—É–¥—Ä–æ–≤—Å–∫–∞—è –ø–∞–ª–∞—Ç–∫–∞", address: "—É–ª. 10 –ê–≤–≥—É—Å—Ç–∞, 36" },
                    { name: "–ö–∞—Ñ–µ ¬´–§–∞–±—Ä–∏–∫–∞¬ª", address: "—É–ª. –ö—Ä–∞—Å–Ω–æ–π –ê—Ä–º–∏–∏, 1" }
                ]
            },
            {
                day: 4,
                city: "–°—É–∑–¥–∞–ª—å",
                locations: [
                    { name: "–°—É–∑–¥–∞–ª—å—Å–∫–∏–π –ö—Ä–µ–º–ª—å", address: "—É–ª. –ö—Ä–µ–º–ª—ë–≤—Å–∫–∞—è, 27" },
                    { name: "–ú—É–∑–µ–π –¥–µ—Ä–µ–≤—è–Ω–Ω–æ–≥–æ –∑–æ–¥—á–µ—Å—Ç–≤–∞", address: "—É–ª. –ü—É—à–∫–∞—Ä—Å–∫–∞—è, 27–ë" },
                    { name: "–ü–æ–∫—Ä–æ–≤—Å–∫–∏–π –º–æ–Ω–∞—Å—Ç—ã—Ä—å", address: "—É–ª. –ü–æ–∫—Ä–æ–≤—Å–∫–∞—è, 76" },
                    { name: "–°–º–æ—Ç—Ä–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞ —É —Ä–µ–∫–∏ –ö–∞–º–µ–Ω–∫–∞", address: "—É–ª. –ö–æ—Ä–æ–≤–Ω–∏–∫–∏" },
                    { name: "–†–µ—Å—Ç–æ—Ä–∞–Ω ¬´–ì–Ω–µ–∑–¥–æ –ø–µ–∫–∞—Ä—è¬ª", address: "—É–ª. –õ–µ–Ω–∏–Ω–∞, 63" }
                ]
            },
            {
                day: 5,
                city: "–í–ª–∞–¥–∏–º–∏—Ä",
                locations: [
                    { name: "–ó–æ–ª–æ—Ç—ã–µ –≤–æ—Ä–æ—Ç–∞", address: "—É–ª. –ë–æ–ª—å—à–∞—è –ú–æ—Å–∫–æ–≤—Å–∫–∞—è, 1" },
                    { name: "–£—Å–ø–µ–Ω—Å–∫–∏–π —Å–æ–±–æ—Ä", address: "—É–ª. –ë–æ–ª—å—à–∞—è –ú–æ—Å–∫–æ–≤—Å–∫–∞—è, 56" },
                    { name: "–ü–∞—Ä–∫ ¬´–õ–∏–ø–∫–∏¬ª", address: "–°–æ–±–æ—Ä–Ω–∞—è –ø–ª–æ—â–∞–¥—å" },
                    { name: "–ú—É–∑–µ–π –ø—Ä—è–Ω–∏–∫–∞", address: "—É–ª. –ë–æ–ª—å—à–∞—è –ú–æ—Å–∫–æ–≤—Å–∫–∞—è, 40" },
                    { name: "–ö–∞—Ñ–µ ¬´–í–ª–∞–¥–∏–º–∏—Ä—Å–∫–∞—è –≤–∏—à–Ω—è¬ª", address: "—É–ª. –ì–∞–≥–∞—Ä–∏–Ω–∞, 7" }
                ]
            },
            {
                day: 6,
                city: "–ü–µ—Ä–µ—Å–ª–∞–≤–ª—å-–ó–∞–ª–µ—Å—Å–∫–∏–π",
                locations: [
                    { name: "–ü–ª–µ—â–µ–µ–≤–æ –æ–∑–µ—Ä–æ", address: "–Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ä–∫ ¬´–ü–ª–µ—â–µ–µ–≤–æ –æ–∑–µ—Ä–æ¬ª" },
                    { name: "–ú—É–∑–µ–π ¬´–ë–æ—Ç–∏–∫ –ü–µ—Ç—Ä–∞ I¬ª", address: "—Å. –í–µ—Å—å–∫–æ–≤–æ, —É–ª. –ü–µ—Ç—Ä–∞ I, 77" },
                    { name: "–î–µ–Ω–¥—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å–∞–¥", address: "—É–ª. –ñ—É—Ä–∞–≤–ª—ë–≤–∞, 1–ë" },
                    { name: "–ù–∏–∫–∏—Ç—Å–∫–∏–π –º–æ–Ω–∞—Å—Ç—ã—Ä—å", address: "—É–ª. –ó–∞–ø—Ä—É–¥–Ω–∞—è, 20" },
                    { name: "–ö–∞—Ñ–µ ¬´–ë–æ—Ç–∏–∫¬ª", address: "—É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, 11" }
                ]
            },
            {
                day: 7,
                city: "–°–µ—Ä–≥–∏–µ–≤ –ü–æ—Å–∞–¥",
                locations: [
                    { name: "–¢—Ä–æ–∏—Ü–µ-–°–µ—Ä–≥–∏–µ–≤–∞ –õ–∞–≤—Ä–∞", address: "–°–≤—è—Ç–æ-–¢—Ä–æ–∏—Ü–∫–∞—è –°–µ—Ä–≥–∏–µ–≤–∞ –õ–∞–≤—Ä–∞" },
                    { name: "–ö–æ–Ω–Ω—ã–π –¥–≤–æ—Ä", address: "—É–ª. 1-–æ–π –£–¥–∞—Ä–Ω–æ–π –ê—Ä–º–∏–∏, 2" },
                    { name: "–ú—É–∑–µ–π –∏–≥—Ä—É—à–∫–∏", address: "–ø—Ä. –ö—Ä–∞—Å–Ω–æ–π –ê—Ä–º–∏–∏, 123" },
                    { name: "–ü–∞—Ä–∫ ¬´–°–∫–∏—Ç—Å–∫–∏–µ –ø—Ä—É–¥—ã¬ª", address: "–ø—Ä. –ö—Ä–∞—Å–Ω–æ–π –ê—Ä–º–∏–∏" },
                    { name: "–†–µ—Å—Ç–æ—Ä–∞–Ω ¬´–ì–æ—Å—Ç–µ–≤–∞—è –∏–∑–±–∞¬ª", address: "–ø—Ä. –ö—Ä–∞—Å–Ω–æ–π –ê—Ä–º–∏–∏, 134" }
                ]
            },
            {
                day: 8,
                city: "–†–æ—Å—Ç–æ–≤ –í–µ–ª–∏–∫–∏–π",
                locations: [
                    { name: "–†–æ—Å—Ç–æ–≤—Å–∫–∏–π –ö—Ä–µ–º–ª—å", address: "—É–ª. –ö—Ä–µ–º–ª—å, 1" },
                    { name: "–û–∑–µ—Ä–æ –ù–µ—Ä–æ", address: "–Ω–∞–±–µ—Ä–µ–∂–Ω–∞—è –æ–∑–µ—Ä–∞ –ù–µ—Ä–æ" },
                    { name: "–ú—É–∑–µ–π –ª—É–∫–∞", address: "—É–ª. –î–æ—Å—Ç–æ–µ–≤—Å–∫–æ–≥–æ, 39" },
                    { name: "–Ø–∫–æ–≤–ª–µ–≤—Å–∫–∏–π –º–æ–Ω–∞—Å—Ç—ã—Ä—å", address: "—É–ª. –≠–Ω–≥–µ–ª—å—Å–∞, 44" },
                    { name: "–ö–∞—Ñ–µ ¬´–°–æ–±—Ä–∞–Ω–∏–µ¬ª", address: "—É–ª. –ö–∞—Ä–ª–∞ –ú–∞—Ä–∫—Å–∞, 5" }
                ]
            }
        ];

        function buildRoute() {
            const container = document.getElementById('route-container');
            
            routeData.forEach(day => {
                const dayHtml = `
                    <div class="day-card">
                        <h2>–î–µ–Ω—å ${day.day}: ${day.city}</h2>
                        ${day.locations.map(location => `
                            <div class="location">
                                <h3>${location.name}</h3>
                                <div class="address">–ê–¥—Ä–µ—Å: ${location.address}</div>
                                <button class="route-btn" 
                                    onclick="getRoute('${location.address.replace(/'/g, "\\'")}')">
                                    üó∫Ô∏è –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç
                                </button>
                            </div>
                        `).join('')}
                    </div>
                `;
                container.innerHTML += dayHtml;
            });
        }

        async function getRoute(address) {
            const loader = document.getElementById('loader');
            try {
                loader.style.display = 'block';
                
                if (!navigator.geolocation) {
                    throw new Error('–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–∞—à–∏–º –±—Ä–∞—É–∑–µ—Ä–æ–º');
                }

                const position = await new Promise((resolve, reject) => {
                    navigator.geolocation.getCurrentPosition(resolve, reject, {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 0
                    });
                });

                const coords = position.coords;
                const isAndroid = /android/i.test(navigator.userAgent);
                const isYandexBrowser = navigator.userAgent.includes('YaBrowser');

                let yandexMapUrl;
                if (isAndroid && isYandexBrowser) {
                    yandexMapUrl = `intent://build/route/?rtext=${coords.latitude},${coords.longitude}~${encodeURIComponent(address)}#Intent;scheme=yandexmaps;package=ru.yandex.yandexmaps;end`;
                } else {
                    yandexMapUrl = `yandexmaps://build/route/?rtext=${coords.latitude},${coords.longitude}~${encodeURIComponent(address)}`;
                }

                // –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                const iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                iframe.src = yandexMapUrl;
                document.body.appendChild(iframe);

                // –§–æ–ª–±–µ–∫ –Ω–∞ –≤–µ–±-–≤–µ—Ä—Å–∏—é
                setTimeout(() => {
                    document.body.removeChild(iframe);
                    const webUrl = `https://yandex.ru/maps/?mode=routes&rtext=${coords.latitude},${coords.longitude}~${encodeURIComponent(address)}`;
                    window.open(webUrl, '_blank');
                }, 500);

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                let message = '–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞';
                
                if (error.code === error.PERMISSION_DENIED) {
                    message = '–†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞!';
                } else if (error.code === error.TIMEOUT) {
                    message = '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: –ø—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è';
                }
                
                alert(message);
            } finally {
                loader.style.display = 'none';
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = buildRoute;
    </script>
</body>
</html>
